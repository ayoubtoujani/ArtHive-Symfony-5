<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link rel="stylesheet" href="/css/styleFeed.css">

    <title>{% block title %}ArtHive{% endblock %}</title>
    {% block stylesheets %}{% endblock %}

</head>
<body>
   <body>
    <nav>
        <div class="container">
            <h2 class="log">ArtHive</h2>
            {% block search_bar %}
            <div class="search-bar">
                <i class="fa-solid fa-magnifying-glass"></i>
                <input type="search" placeholder="Rechercher des artistes, des inspirations.">
            </div>
            {% endblock %}
            <div class="create">
                <label class="btn btn-primary"   for="créer post">Créer</label>
                
                <div class="profile-photo">
                      <img src="{{ asset('images/' ~ user.getPhoto() ) }}" style="width: 50px; height: 50px; " alt="">
                </div>
            <a href="{{ path('app_login') }}" class="btn btn-primary">Log Out</a>
  
 



        </div>
        </div>
    </nav>

    <!...............................MAIN...........................>
    <main> 
        <div class="container">
    <!..............................LEFT.............................>
            <div class="left">
                <a class="profile">
                    <div class="profile-photo">
                      <img src="{{ asset('images/' ~ user.getPhoto() ) }}" style="width: 30px; height: 30px;" alt="">

                    </div>
                   {% if user is not null %}
    <div class="handle" id="nameLoggedinuser">
        <h4>{{ user.getNomUser() }} {{ user.getPrenomUser() }}</h4>
        <p class="text-muted">@{{ user.getNomUser() }}</p>
    </div>
{% endif %}
                </a>
                <!.................................SIDEBAR.....................................>
                <div class="sidebar">
                <a class="menu-item " id="home" href="{{path('afficher_publications')}}" >
                        <span><i class="fa-solid fa-house"></i></span><h3>Home</h3>
                    </a>
                    <a class="menu-item " href="{{ path('my_publications') }}" id="profile">
    <span><i class="fa-solid fa-user"></i></span><h3>Profile</h3>
</a>
                    <a class="menu-item" id="groups" >
                        <span><i class="fa-solid fa-people-group"></i></span><h3>Groupes</h3>
                    </a>
                    <a class="menu-item"id = "marketplace">
                        <span><i class="fa-solid fa-shop"></i></span><h3>Marketplace</h3>
                    </a>
                    <a class="menu-item" id= "events" >
                        <span><i class="fa-solid fa-calendar-days"></i></span><h3>Events</h3>
                    </a>
                    <a class="menu-item " id ="themes">
                        <span><i class="fa-solid fa-palette"></i></span><h3>Themes</h3>
                    </a>
                </div>
                <!.................END OF SIDEBAR............>
                <label id="create-post-button" for="create-post" class="btn btn-primary"><i class="fa-solid fa-circle-plus"></i> 
                    Créer post</label>
            </div>
    <!............................MIDDLE...............................>
        <div class="content" style="width: 130%; height: auto;">
            {% block content %}
           
            {% endblock %}
        </div> 
                   
 </div>
</main>
 <script>
     document.addEventListener("DOMContentLoaded", function() {
            const menuItems = document.querySelectorAll('.menu-item');
            function activateMenuItem(item) {
                menuItems.forEach(otherItem => {
                    otherItem.classList.remove('active');
                });
                item.classList.add('active');
                // Enregistrer l'ID de l'élément actif dans le stockage local
                localStorage.setItem('activeMenuItemId', item.id);
            }

            menuItems.forEach(item => {
                item.addEventListener('click', () => {
                    activateMenuItem(item);
                });
            });

            // Vérifier s'il y a un élément de menu actif enregistré dans le stockage local
            const activeMenuItemId = localStorage.getItem('activeMenuItemId');
            if (activeMenuItemId) {
                const activeMenuItem = document.getElementById(activeMenuItemId);
                if (activeMenuItem) {
                    activateMenuItem(activeMenuItem);
                }
            }    
        });
    </script>
</body>
</html>